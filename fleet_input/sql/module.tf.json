{
  "//": "Generated by fleet-terraform-generator - DO NOT EDIT",
  "variable": {
    "condition": {
      "type": "string",
      "description": "Condition to filter when to apply this datastream. Refer to [Conditions](https://www.elastic.co/guide/en/fleet/current/dynamic-input-configuration.html#conditions) on how to use the available keys in conditions.",
      "default": null
    },
    "data_stream_dataset": {
      "type": "string",
      "description": "Set the name for your dataset. Once selected a dataset cannot be changed without creating a new integration policy. You can't use - in the name of a dataset and only valid characters for Elasticsearch index names are permitted.",
      "default": "sql",
      "nullable": false
    },
    "driver": {
      "type": "string",
      "default": "mysql",
      "nullable": false
    },
    "fleet_agent_policy_id": {
      "type": "string",
      "description": "Agent policy ID to add the package policy to."
    },
    "fleet_data_stream_namespace": {
      "type": "string",
      "description": "Namespace to use for the data stream.",
      "default": "default"
    },
    "fleet_package_policy_description": {
      "type": "string",
      "description": "Description to use for the package policy.",
      "default": ""
    },
    "fleet_package_policy_name_suffix": {
      "type": "string",
      "description": "Suffix to append to the end of the package policy name.",
      "default": ""
    },
    "fleet_package_version": {
      "type": "string",
      "description": "Version of the sql package to use.",
      "default": "0.7.0"
    },
    "hosts": {
      "type": "list(string)",
      "default": [
        "root:test@tcp(127.0.0.1:3306)/"
      ],
      "nullable": false
    },
    "merge_results": {
      "type": "bool",
      "description": "Merge results from multiple queries to a single event (restrictions apply)",
      "default": false
    },
    "period": {
      "type": "string",
      "default": "10s"
    },
    "processors_yaml": {
      "type": "string",
      "description": "Processors are used to reduce the number of fields in the exported event or to enhance the event with metadata. This executes in the agent before the events are shipped. See [Processors](https://www.elastic.co/guide/en/fleet/current/elastic-agent-processor-configuration.html) for details.",
      "default": null
    },
    "sql_queries_yaml": {
      "type": "string",
      "default": "- query: SHOW GLOBAL STATUS LIKE 'Innodb_system%'\n  response_format: variables\n        \n",
      "nullable": false
    }
  },
  "output": {
    "id": {
      "description": "Package policy ID",
      "value": "${module.fleet_package_policy.id}"
    }
  },
  "module": {
    "fleet_package_policy": {
      "agent_policy_id": "${var.fleet_agent_policy_id}",
      "all_data_streams": [],
      "all_policy_template_inputs": [],
      "data_stream": "",
      "data_stream_variables_json": "${jsonencode({\n  condition = var.condition\n  \"data_stream.dataset\" = var.data_stream_dataset\n  driver = var.driver\n  hosts = var.hosts\n  merge_results = var.merge_results\n  period = var.period\n  processors = var.processors_yaml\n  sql_queries = var.sql_queries_yaml\n})}",
      "description": "${var.fleet_package_policy_description}",
      "input_type": "sql/metrics",
      "namespace": "${var.fleet_data_stream_namespace}",
      "package_name": "sql",
      "package_policy_name": "sql-${var.fleet_data_stream_namespace}${var.fleet_package_policy_name_suffix}",
      "package_version": "${var.fleet_package_version}",
      "policy_template": "sql",
      "source": "../../fleet_package_policy"
    }
  }
}
