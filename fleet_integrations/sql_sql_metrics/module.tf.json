{
  "//": "Generated by fleet-terraform-generator - DO NOT EDIT",
  "variable": {
    "driver": {
      "type": "string",
      "default": "mysql",
      "nullable": false
    },
    "fleet_agent_policy_id": {
      "type": "string",
      "description": "Agent policy ID to add the package policy to."
    },
    "fleet_data_stream_description": {
      "type": "string",
      "description": "Description to use for the data stream.",
      "default": ""
    },
    "fleet_data_stream_namespace": {
      "type": "string",
      "description": "Namespace to use for the data stream.",
      "default": "default"
    },
    "fleet_package_version": {
      "type": "string",
      "description": "Version of the sql package to use.",
      "default": "0.2.0"
    },
    "fleet_policy_name_suffix": {
      "type": "string",
      "description": "Suffix to use at the end of the generated Policy Name.",
      "default": ""
    },
    "hosts": {
      "type": "list(string)",
      "default": [
        "root:test@tcp(127.0.0.1:3306)/"
      ],
      "nullable": false
    },
    "period": {
      "type": "string",
      "default": "10s"
    },
    "sql_queries_yaml": {
      "type": "string",
      "default": "- query: SHOW GLOBAL STATUS LIKE 'Innodb_system%'\n  response_format: variables\n        \n",
      "nullable": false
    }
  },
  "output": {
    "id": {
      "description": "Package policy ID",
      "value": "${module.fleet_package_policy.id}"
    }
  },
  "module": {
    "fleet_package_policy": {
      "agent_policy_id": "${var.fleet_agent_policy_id}",
      "all_data_streams": [],
      "data_stream": "",
      "data_stream_variables_json": "${jsonencode({\n  driver = var.driver\n  hosts = var.hosts\n  period = var.period\n  sql_queries = var.sql_queries_yaml\n})}",
      "description": "${var.fleet_data_stream_description}",
      "input_type": "sql/metrics",
      "namespace": "${var.fleet_data_stream_namespace}",
      "package_name": "sql",
      "package_policy_name": "sql-${var.fleet_data_stream_namespace}${var.fleet_policy_name_suffix}",
      "package_version": "${var.fleet_package_version}",
      "policy_template": "sql",
      "source": "../../fleet_package_policy"
    }
  }
}
