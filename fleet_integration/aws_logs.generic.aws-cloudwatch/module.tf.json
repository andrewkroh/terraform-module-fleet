{
  "//": "Generated by fleet-terraform-generator - DO NOT EDIT",
  "variable": {
    "access_key_id": {
      "type": "string",
      "default": null,
      "sensitive": true
    },
    "api_sleep": {
      "type": "string",
      "description": "This is used to sleep between AWS FilterLogEvents API calls inside the same collection period. `FilterLogEvents` API has a quota of 5 transactions per second (TPS)/account/Region. This value should only be adjusted when there are multiple Filebeats or multiple Filebeat inputs collecting logs from the same region and AWS account.",
      "default": "200ms"
    },
    "api_timeput": {
      "type": "string",
      "description": "The maximum duration of AWS API can take. If it exceeds the timeout, AWS API will be interrupted.",
      "default": "120s"
    },
    "credential_profile_name": {
      "type": "string",
      "default": null
    },
    "custom_yaml": {
      "type": "string",
      "description": "Additional settings to be added to the configuration. Be careful using this as it might break the input as those settings are not validated and can override the settings specified above. See [`aws-cloudwatch` input settings docs](https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-input-aws-cloudwatch.html) for details.\n",
      "default": ""
    },
    "data_stream_dataset": {
      "type": "string",
      "description": "Set the name for your dataset. Changing the dataset will send the data to a different index. You can't use `-` in the name of a dataset and only valid characters for [Elasticsearch index names](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-index_.html).\n",
      "default": "aws_logs.generic",
      "nullable": false
    },
    "default_region": {
      "type": "string",
      "description": "Default region to use prior to connecting to region specific services/endpoints if no AWS region is set from environment variable, credentials or instance profile. If none of the above are set and no default region is set as well, `us-east-1` is used. A region, either from environment variable, credentials or instance profile or from this default region setting, needs to be set when using regions in non-regular AWS environments such as AWS China or US Government Isolated.",
      "default": ""
    },
    "endpoint": {
      "type": "string",
      "description": "URL of the entry point for an AWS web service",
      "default": ""
    },
    "fleet_agent_policy_id": {
      "type": "string",
      "description": "Agent policy ID to add the package policy to."
    },
    "fleet_data_stream_namespace": {
      "type": "string",
      "description": "Namespace to use for the data stream.",
      "default": "default"
    },
    "fleet_package_policy_description": {
      "type": "string",
      "description": "Description to use for the package policy.",
      "default": ""
    },
    "fleet_package_policy_name_suffix": {
      "type": "string",
      "description": "Suffix to append to the end of the package policy name.",
      "default": ""
    },
    "fleet_package_version": {
      "type": "string",
      "description": "Version of the aws_logs package to use.",
      "default": "1.2.0"
    },
    "latency": {
      "type": "string",
      "description": "The amount of time required for the logs to be available to CloudWatch Logs. Sample values, `1m` or `5m` â€” see Golang [time.ParseDuration](https://pkg.go.dev/time#ParseDuration) for more details. Latency translates the query's time range to consider the CloudWatch Logs latency. Example: `5m` means that the integration will query CloudWatch to search for logs available 5 minutes ago.",
      "default": null
    },
    "log_group_arn": {
      "type": "string",
      "description": "ARN of the log group to collect logs from.",
      "default": null
    },
    "log_group_name": {
      "type": "string",
      "description": "Name of the log group to collect logs from. `region_name` is required when `log_group_name` is given.",
      "default": null
    },
    "log_group_name_prefix": {
      "type": "string",
      "description": "The prefix for a group of log group names. `region_name` is required when `log_group_name_prefix` is given. `log_group_name` and `log_group_name_prefix` cannot be given at the same time.",
      "default": null
    },
    "log_stream_prefix": {
      "type": "string",
      "description": "A string to filter the results to include only log events from log streams that have names starting with this prefix.",
      "default": null
    },
    "log_streams": {
      "type": "list(string)",
      "description": "A list of strings of log streams names that Filebeat collect log events from.",
      "default": null
    },
    "number_of_workers": {
      "type": "number",
      "description": "The number of workers assigned to read from log groups. Each worker will read log events from one of the log groups matching `log_group_name_prefix`. For example, if `log_group_name_prefix` matches five log groups, then `number_of_workers` should be set to `5`. The default value is `1`.",
      "default": 1
    },
    "pipeline": {
      "type": "string",
      "description": "The Ingest Node pipeline ID to be used by the integration.\n",
      "default": null
    },
    "preserve_original_event": {
      "type": "bool",
      "description": "Preserves a raw copy of the original event, added to the field `event.original`",
      "default": false,
      "nullable": false
    },
    "processors_yaml": {
      "type": "string",
      "description": "Processors are used to reduce the number of fields in the exported event or to enhance the event with metadata. This executes in the agent before the logs are parsed. See [Processors](https://www.elastic.co/guide/en/beats/filebeat/current/filtering-and-enhancing-data.html) for details.\n",
      "default": null
    },
    "proxy_url": {
      "type": "string",
      "description": "URL to proxy connections in the form of http\\[s\\]://<user>:<password>@<server name/ip>:<port>",
      "default": null
    },
    "region_name": {
      "type": "string",
      "description": "Region that the specified log group or log group prefix belongs to.",
      "default": null
    },
    "role_arn": {
      "type": "string",
      "default": null
    },
    "scan_frequency": {
      "type": "string",
      "description": "This config parameter sets how often Filebeat checks for new log events from the specified log group.",
      "default": "1m"
    },
    "secret_access_key": {
      "type": "string",
      "default": null,
      "sensitive": true
    },
    "session_token": {
      "type": "string",
      "default": null,
      "sensitive": true
    },
    "shared_credential_file": {
      "type": "string",
      "description": "Directory of the shared credentials file",
      "default": null
    },
    "start_position": {
      "type": "string",
      "description": "Allows user to specify if this input should read log files from the beginning or from the end.",
      "default": "beginning"
    },
    "tags": {
      "type": "list(string)",
      "default": [
        "forwarded"
      ],
      "nullable": false
    }
  },
  "output": {
    "id": {
      "description": "Package policy ID",
      "value": "${module.fleet_package_policy.id}"
    }
  },
  "module": {
    "fleet_package_policy": {
      "agent_policy_id": "${var.fleet_agent_policy_id}",
      "all_data_streams": [
        "generic"
      ],
      "all_policy_template_inputs": [
        "aws_logs-aws-s3",
        "aws_logs-aws-cloudwatch"
      ],
      "data_stream": "generic",
      "data_stream_variables_json": "${jsonencode({\n  api_sleep = var.api_sleep\n  api_timeput = var.api_timeput\n  custom = var.custom_yaml\n  \"data_stream.dataset\" = var.data_stream_dataset\n  latency = var.latency\n  log_group_arn = var.log_group_arn\n  log_group_name = var.log_group_name\n  log_group_name_prefix = var.log_group_name_prefix\n  log_stream_prefix = var.log_stream_prefix\n  log_streams = var.log_streams\n  number_of_workers = var.number_of_workers\n  pipeline = var.pipeline\n  preserve_original_event = var.preserve_original_event\n  processors = var.processors_yaml\n  region_name = var.region_name\n  scan_frequency = var.scan_frequency\n  start_position = var.start_position\n  tags = var.tags\n})}",
      "description": "${var.fleet_package_policy_description}",
      "input_type": "aws-cloudwatch",
      "namespace": "${var.fleet_data_stream_namespace}",
      "package_name": "aws_logs",
      "package_policy_name": "aws_logs-generic-${var.fleet_data_stream_namespace}${var.fleet_package_policy_name_suffix}",
      "package_variables_json": "${jsonencode({\n  access_key_id = var.access_key_id\n  credential_profile_name = var.credential_profile_name\n  default_region = var.default_region\n  endpoint = var.endpoint\n  proxy_url = var.proxy_url\n  role_arn = var.role_arn\n  secret_access_key = var.secret_access_key\n  session_token = var.session_token\n  shared_credential_file = var.shared_credential_file\n})}",
      "package_version": "${var.fleet_package_version}",
      "policy_template": "aws_logs",
      "source": "../../fleet_package_policy"
    }
  }
}
